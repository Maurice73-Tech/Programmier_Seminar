{% extends 'base.html' %}
{%load static%}

{%block link%}

<link rel=stylesheet type="text/css" href="{% static 'css/anmeldenstyle.css' %}?{% now "U" %}"/>

{% if user.is_authenticated %}

  <link rel=stylesheet href="{% static 'css/navigationsbar2.css' %}"/>

{% else %}

  <link rel=stylesheet href="{% static 'css/navigationsbar.css' %}"/>

{% endif %}

{% endblock %}

{% block title %}
  Forum
{% endblock %}

{% block content %}

{% if user.is_authenticated %}
  <div id="submissionsField">
    <div class="container" style="text-align: center;">
      <h1 id="userpost">User Posts:</h1>
      <br/>

      <div>
        <div class="form-outline">
          <input type="text" id="searchInput" class="form-control" placeholder="Nach Titel suchen..." aria-label="search" onkeyup="searchFunction()" style="margin-bottom: 10px;"/>
        </div>
        <button id="start-btn" class=".btn btn-success">
          <span><i class="fas fa-microphone"></i></span>
        </button>
        <button id="stop-btn" class=".btn btn-danger">
          <i class="fas fa-microphone-slash"></i>
        </button><br/>
      </div>
      <p id="instructions" style="display: inline-block;">Für Spracherkennung den Startknopf drücken [Funktioniert nur in Chrome]</p><br/>
      <a class="btn btn-outline-success" href="/addpost" role="button"><i class="fas fa-pen-fancy"></i> Neue Frage stellen</a>  
      <br/><br/>
    </div>

    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-info mx-auto" role="alert" style="width: 224px; text-align: center; margin-top: 10px; margin-bottom: 10px;"> {{ message }}</div>
      {% endfor %}
     {% endif %}

    <ul id="myList">
    {% for post in object_list %}
      <li>
      <div class="card mx-auto mt-3"> 
        <div class="card-body" id="post-card">
          <h5 class="card-title"><a href="{% url 'blog-details' post.pk %}">{{post.Titel}}</a></h5>
          <h6 class="card-subtitle mb-2 text-muted">Erstellt von {{post.Autor.username}}</h6>
          <h6>{{post.getTotalLikes}} <i class="far fa-thumbs-up"></i></h6>
        </div>
      </div>
      </li>
    {% endfor %}
    </ul>
  </div>

{% else %}

<div class="card ml-auto" id="submissionsField" style="width: 20rem;">
  <img class="card-img-top" src="../static/bilder/logo.jpeg" alt="Card image cap">
  <div class="card-body">
    <h4 class="card-title">Keine Authentifizierung!</h4>
    <p class="card-text">Um auf das Forum zugreifen zu können, müssen Sie sich einloggen oder registrieren.</p>
    <a onclick="location.href= '/login'" class="btn btn-primary" role="button">Login</a>
    <a onclick="location.href= '/registrieren'" class="btn btn-primary" role="button">Registrieren</a>
  </div>
</div>
</div>
  

{% endif %}

{% endblock %}